{% extends 'FrontOffice/base.html.twig' %}

{% block body %}
    <!-- Contenu spécifique du corps de la page -->
    <div class="container bootstrap snippets bootdey">
        <h1 class="text-primary"></h1>
        <hr>
        <div class="row">
            <!-- left column -->
            <div class="col-md-3">
                <div class="text-center">
                    <form id="change-photo-form" action="{{ path('change_photo') }}" method="post" enctype="multipart/form-data">
                        <label for="avatar-upload" style="cursor: pointer;">
                            <img id="avatar-preview" src="{{ app.user.photo ? asset('img/' ~ app.user.photo) : 'https://bootdey.com/img/Content/avatar/avatar7.png' }}" class="avatar img-circle img-thumbnail" alt="avatar" style="width: 200px; height: 200px;">
                            <!-- Définir la largeur et la hauteur de l'image à 200 pixels -->
                            <h6 style="display: inline-block; margin-left: 5px; vertical-align: middle;">
                                <i class="fas fa-camera fa-2x" style="color: #3498db; vertical-align: middle;"></i> Changer la photo
                            </h6>
                        </label>
                        <input type="file" id="avatar-upload" name="image" style="display: none;">
                    </form>
                    
                    
                    
                    <script>
                        // Ajouter un gestionnaire d'événements pour le changement de fichier
                        document.getElementById('avatar-upload').addEventListener('change', function() {
                            // Soumettre automatiquement le formulaire lorsque le fichier est sélectionné
                            document.getElementById('change-photo-form').submit();
                        });
                    </script>
                </div>
            </div>
            
          
            <!-- edit form column -->
            <div class="col-md-9 personal-info">
                <h3>Informations personnelles</h3>
                
                <form class="form-horizontal" role="form">
                    <div class="form-group">
                        <label class="col-lg-3 control-label">Prénom :</label>
                        <div class="col-lg-8">
                            <input class="form-control" type="text" value="{{ app.user.prenom }}" readonly style="background-color: #f5f5f5;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 control-label">Nom :</label>
                        <div class="col-lg-8">
                            <input class="form-control" type="text" value="{{ app.user.nom }}" readonly style="background-color: #f5f5f5;">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="col-lg-3 control-label">Email :</label>
                        <div class="col-lg-8">
                            <input class="form-control" type="text" value="{{ app.user.email }}" readonly style="background-color: #f5f5f5;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 control-label">Date de naissance :</label>
                        <div class="col-lg-8">
                            <input class="form-control" type="text" value="{{ app.user.dateDeNaissance|date('Y-m-d') }}" readonly style="background-color: #f5f5f5;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 control-label">Adresse :</label>
                        <div class="col-lg-8">
                            <input class="form-control" type="text" value="{{ app.user.adresse }}" readonly style="background-color: #f5f5f5;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 control-label">Téléphone :</label>
                        <div class="col-lg-8">
                            <input class="form-control" type="text" value="{{ app.user.telephone }}" readonly style="background-color: #f5f5f5;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-3 control-label">CIN :</label>
                        <div class="col-lg-8">
                            <input class="form-control" type="text" value="{{ app.user.cin }}" readonly style="background-color: #f5f5f5;">
                        </div>
                    </div>
                </form>
                <div style="margin-top: 20px;"> <!-- Ajout d'une marge de 20px en haut -->
                    <div class="text-right">
                        <a href="{{ path('app_change_password') }}" class="btn btn-primary btn-sm" id="changePasswordButton" style="background-color: #003788; border-color: #003788;">Changer le mot de passe</a>
                        <span style="margin-right: 0.5cm;"></span>
                        <a href="{{ path('') }}" class="btn btn-secondary btn-sm" id="anotherActionButton" style="background-color: #003788; border-color: #003788;">Supprimer votre compte</a>
                    </div>
                </div>
                
                
                
                
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const changePasswordButton = document.getElementById('changePasswordButton');
                
                        if (changePasswordButton) {
                            changePasswordButton.addEventListener('click', function(event) {
                                event.preventDefault();
                                const url = this.getAttribute('href');
                                // Ouvrir une nouvelle fenêtre (popup) avec l'URL spécifiée
                                window.open(url, '_blank', 'width=600,height=400'); // Vous pouvez ajuster la taille de la fenêtre popup selon vos besoins
                            });
                        }
                    });
                </script>
                
                
                
                
            </div>
        </div>
    </div>
    <hr>
{% endblock %}




